{% extends 'base.html' %}
{% load static %}

{% block head %}
    <title>My SW Idea Manage</title>
    <style>
        .idea-item {
            position: relative;
        }
        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }
    </style>
{% endblock %}

{%block content%}
<main>
    <h1>Idea List</h1>
    <p>ë‚˜ì˜ ì•„ì´ë””ì–´ë¥¼ ìŠì§€ë§ê³  ê¸°ë¡í•´ë³´ì„¸ìš”</p>
    <div class="sort">
        <form method="get" action="{% url 'posts:main' %}" class="d-inline-flex"></form>
            <select class="form-control">
                <option value="nothing">--ì •ë ¬ê¸°ì¤€--</option>
                <option value="likes" {% if request.GET.sort == 'likes' %}selected{% endif %}>ì°œí•œ ìˆœ</option>
                <option value="name" {% if request.GET.sort == 'name' %}selected{% endif %}>ì´ë¦„ìˆœ</option>
                <option value="created" {% if request.GET.sort == 'created' %}selected{% endif %}>ë“±ë¡ìˆœ</option>
                <option value="updated" {% if request.GET.sort == 'updated' %}selected{% endif %}>ìµœì‹ ìˆœ</option>
            </select>
        </form>
    </div>
    

    <div class="idea_list">
        <!-- ê¸€ ëª©ë¡ -->
        {% for post in posts %}
            <div class="idea-item">
                {% if post.image.url != null and post.image.url != '' %}
                    <img src="{{ post.image.url }}" alt="ëŒ€ì²´í…ìŠ¤íŠ¸">
                {% else %}
                    <img src="{% static 'posts/image/no_img.png' %}" alt="">
                {% endif %}
                <button class="favorite-btn" onclick="toggleFavorite(this)">ğŸ¤</button>
                <div class="info">
                <a href="{% url 'posts:detail' post.pk%}" class="title">
                    {{post.title}}
                </a>
                <p>ì˜ˆìƒ ê°œë°œ íˆ´: {{post.devtool}}</p>
                <p>
                    ì•„ì´ë””ì–´ ê´€ì‹¬ë„: 
                        <button class="minus-btn" data-post-id="{{ post.pk }}">-</button>
                        <span class="interest-count" id="interest-count-{{ post.pk }}">{{ post.interest }}</span>
                        <button class="plus-btn" data-post-id="{{ post.pk }}">+</button>
                </p>
                </div>
            </div>
        {% endfor %}
    </div>
</main>
<script>
    function toggleFavorite(button) {
        if (button.innerHTML === 'ğŸ¤') {
            button.innerHTML = 'â¤ï¸';
        } else {
            button.innerHTML = 'ğŸ¤';
        }
    }

</script>
{% endblock %}
